# Arquitetura C4 Model

Este documento apresenta a arquitetura da aplica√ß√£o **CrewAI Assistant API** utilizando o modelo C4, que descreve sistemas de software em diferentes n√≠veis de abstra√ß√£o: Contexto, Cont√™ineres, Componentes e C√≥digo.

## Vis√£o de Cont√™ineres

A vis√£o de cont√™ineres mostra os principais componentes tecnol√≥gicos (cont√™ineres) do sistema e suas intera√ß√µes de alto n√≠vel.

```mermaid
C4Container
title CrewAI Assistant API ‚Äî Vis√£o de Cont√™ineres
UpdateLayoutConfig($c4ShapeInRow="3", $c4BoundaryInRow="1")

Person(user, "Cliente/SDK", "Consome a API REST")

System_Boundary(s1, "ü§ñ CrewAI Assistant API"){
  Container(api, "FastAPI Application", "FastAPI", "Endpoints REST para chat e health")
  Container(orchestrator, "CrewAI Orchestrator", "CrewAI", "Coordena agentes e ferramentas")
  Container(sampleAgents, "Sample Agents", "Python", "Pipeline Researcher ‚Üí Assistant")
  Container(rag, "RAG Tools", "Python", "Recupera√ß√£o Aumentada por Gera√ß√£o")
  Container(integrations, "Integrations", "Python/HTTP", "Glue com servi√ßos externos e fontes")
}
Container_Ext(extSvcs, "External Services", "APIs", "Groq (LLM), Google AI (Embeddings), Serper (Web Search)")
ContainerDb_Ext(data, "Data Sources", "PDFs/HTTP", "PDFs locais e p√°ginas web")
Rel(user, api, "HTTP(S) JSON")
Rel(api, orchestrator, "Invoca / delega", "internal call")
Rel(orchestrator, sampleAgents, "Dispara tarefas")
Rel(orchestrator, rag, "Consulta / gera√ß√£o com contexto")
Rel(rag, data, "Busca/raspa conte√∫do")
Rel(integrations, extSvcs, "Chama APIs externas")
Rel(orchestrator, integrations, "Usa integra√ß√µes")
Rel(api, orchestrator, "Recebe respostas", "internal return")
Rel(orchestrator, data, "L√™/Escreve", "quando aplic√°vel")

```

## Vis√£o de Componentes

A vis√£o de componentes detalha os componentes internos da aplica√ß√£o FastAPI, focando nos endpoints e suas intera√ß√µes.

```mermaid
C4Component
title FastAPI Application ‚Äî Vis√£o de Componentes (Endpoints)
UpdateLayoutConfig($c4ShapeInRow="3", $c4BoundaryInRow="1")

Person(user, "Cliente/SDK", "Chama endpoints")

Container_Boundary(api, "FastAPI Application"){
  Component(chatEndpoint, "/api/v1/chat", "Endpoint POST", "Chat/completion orquestrado")
  Component(healthEndpoint, "/health", "Endpoint GET", "Liveness/Readiness")
}

Container(orchestrator, "CrewAI Orchestrator", "CrewAI", "Coordena agentes e ferramentas")
Container(sampleAgents, "Sample Agents", "Python", "Researcher + Assistant")
Container(rag, "RAG Tools", "Python", "Recupera√ß√£o Aumentada por Gera√ß√£o")
Container(integrations, "Integrations", "Python/HTTP", "Bridge para servi√ßos externos")
Container_Ext(extSvcs, "External Services", "APIs", "Groq, Google AI, Serper")
ContainerDb_Ext(data, "Data Sources", "PDFs/HTTP", "PDFs locais e p√°ginas web")

Rel(user, chatEndpoint, "HTTP POST JSON")
Rel(user, healthEndpoint, "HTTP GET")

Rel(chatEndpoint, orchestrator, "Solicita fluxo de chat")

Rel(healthEndpoint, orchestrator, "Ping interno", "opcional")

Rel(orchestrator, sampleAgents, "Aciona Researcher ‚Üí Assistant")
Rel(orchestrator, rag, "Recupera contexto")
Rel(rag, data, "Consulta fontes")
Rel(orchestrator, integrations, "Usa integra√ß√µes")
Rel(integrations, extSvcs, "Chama LLM/Embeddings/Search")

```
